# 9.1 ë¦¬ì•¡íŠ¸ í›…

## 1. useState

: ë¦¬ì•¡íŠ¸ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ `useState` í›…ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤. `useState`ì˜ íƒ€ì… ì •ì˜ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```typescript
function useState<S>(
  initialState: S | (() => S)
): [S, Dispatch<SetStateAction<S>>];

type Dispatch<A> = (value: A) => void;
type SetStateAction<S> = S | ((prevState: S) => S);
```

-> useStateê°€ ë°˜í™˜í•˜ëŠ” íŠœí”Œì˜ ì²« ë²ˆì§¸ ìš”ì†ŒëŠ” ì œë„¤ë¦­ìœ¼ë¡œ ì§€ì •í•œ S íƒ€ì…ì´ë‹¤. ë‘ ë²ˆì§¸ ìš”ì†ŒëŠ” ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” Dispatch íƒ€ì…ì˜ í•¨ìˆ˜ì´ë‹¤. Dispatch í•¨ìˆ˜ì˜ ì œë„¤ë¦­ìœ¼ë¡œ ì§€ì •í•œ SetStateActionì—ëŠ” useStateë¡œ ê´€ë¦¬í•  ìƒíƒœ íƒ€ì…ì¸ S ë˜ëŠ” ì´ì „ ìƒíƒœ ê°’ì„ ë°›ì•„ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì¸ (prevState: S) => Sê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤. ì´ì²˜ëŸ¼ useStateë¥¼ ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

#### ë§Œì•½ useState ì— íƒ€ì…ì´ ì—†ë‹¤ë©´?

```ts
import { useState } from 'react';

const MemberList = () => {
  const [memberList, setMemberList] = useState([
    {
      name: 'kei',
      age: 12,
    },
    {
      name: 'kiki',
      age: 13,
    },
  ]);


  // ğŸš¨ addMember í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ sumAge ëŠ” NaNì´ ëœë‹¤
  const sumAge = memberList.reduce((sum, member) => member + member.age, 0);

  const addMember = () => {
    setMemberList([
      ...memberList,
      {
        name: 'DokdoBaedal',
        agee: 11,
      },
    ]),
  };
};
```

#### ìœ„ ì½”ë“œë¥¼ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ì‘ì„±í•˜ì—¬ ì—ëŸ¬ë¥¼ ì‚¬ì „ì— ë°©ì§€í•  ìˆ˜ ìˆë‹¤.

```ts
import { useState } from 'react';

interface Member {
  name: string;
  age: number;
}

const MemberList = () => {
  const [memberList, setMemberList] = useState<Member[]>([]);

  // numberì˜ íƒ€ì…ì´ Member íƒ€ì…ìœ¼ë¡œ ë³´ì¥ëœë‹¤.
  const sumAge = memberList.reduce((sum, member) => member + member.age, 0);

  const addMember = () => {
    // ğŸš¨ Error : Type 'Member | { name: string; agee: number; }'
    // is not assigable to type 'Member'
    setMemberList([
      ...memberList,
      {
        name: 'DokdoBaedal',
        agee: 11,
      },
    ]),
  };

  return {
    //...
  };
};
```

-> `setMemberList`ì˜ í˜¸ì¶œ ë¶€ë¶„ì—ì„œ ì¶”ê°€í•˜ë ¤ëŠ” ìƒˆ ê°ì²´ì˜ íƒ€ì…ì„ í™•ì¸í•˜ì—¬ ì»´íŒŒì¼íƒ€ì„ì— íƒ€ì…ì—ëŸ¬ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.

# 9.2 ì˜ì¡´ì„± ë°°ì—´ì„ ì‚¬ìš©í•˜ëŠ” í›…

## useEffectì™€ useLayoutEffect

: ë Œë”ë§ ì´í›„ ë¦¬ì•¡íŠ¸ í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì— ì–´ë–¤ ì¼ì„ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ”ì§€ ì•Œë ¤ì£¼ê¸° ìœ„í•´ `useEffect`í›…ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤. `useEffect`ì˜ íƒ€ì… ì •ì˜ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```ts
function useEffect(effect: EffectCallback, deps?: DependencyList): void;
type DependencyList = ReadonlyArray<any>;
type EffectCallback = () => void | Destructor;
```

-> `useEffect`ì˜ ì²« ë²ˆì§¸ ì¸ìì´ì `effect`ì˜ íƒ€ì…ì¸ `EffectCallback`ì€ `Destructor`ë¥¼ ë°˜í™˜í•˜ê±°ë‚˜ ì•„ë¬´ê²ƒë„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ” í•¨ìˆ˜ì´ë‹¤. Promise íƒ€ì…ì€ ë°˜í™˜í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ `useEffect`ì˜ ì½œë°± í•¨ìˆ˜ì—ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ê°€ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤.
